---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import { ViewCard } from '../components/ViewCard';

const papers = await getCollection('papers');
---

<BaseLayout title="The Gallery | Zhicheng Han" description="Academic papers, lecture notes, and research in mathematics.">
	<section class="py-12">
		<h1 class="text-5xl font-extrabold tracking-tighter mb-4 leading-none">The <span class="text-blue-400">Gallery</span></h1>
		<p class="text-xl text-gray-400 mb-12 max-w-2xl leading-relaxed">Academic work and mathematical explorations. Professional-grade PDFs and source TeX files.</p>

		<div class="columns-1 md:columns-2 gap-12 space-y-12">
			{papers.map((paper) => (
				<ViewCard client:load className="break-inside-avoid">
					<div class="relative aspect-[3/4] overflow-hidden">
						<img 
							src={paper.data.image} 
							alt={paper.data.title} 
							class="w-full h-full object-cover grayscale opacity-60 group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-700 group-hover:scale-110"
						/>
						<div class="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent" />
						
						<div class="absolute inset-0 p-8 flex flex-col justify-end">
							<h3 class="text-2xl font-black tracking-tight mb-4 group-hover:text-blue-400 transition-colors leading-tight">
								{paper.data.title}
							</h3>
							<p class="text-gray-400 text-sm mb-6 leading-relaxed line-clamp-3">
								{paper.data.description}
							</p>
							<div class="flex flex-wrap gap-2 mb-8">
								{paper.data.tags.map(tag => (
									<span class="text-[8px] uppercase tracking-[0.2em] bg-blue-500/10 text-blue-400 border border-blue-500/20 px-2 py-1 rounded">
										{tag}
									</span>
								))}
							</div>
							<div class="flex space-x-6">
								{paper.data.pdfUrl && (
									<a href={paper.data.pdfUrl} target="_blank" class="text-[10px] font-bold uppercase tracking-widest text-blue-400 hover:text-white transition-colors border-b border-blue-400/20 hover:border-white">
										View PDF
									</a>
								)}
								{paper.data.texUrl && (
									<a href={paper.data.texUrl} download class="text-[10px] font-bold uppercase tracking-widest text-gray-400 hover:text-white transition-colors border-b border-white/10 hover:border-white">
										Source TeX
									</a>
								)}
							</div>
						</div>
					</div>
				</ViewCard>
			))}
		</div>
	</section>
</BaseLayout>
