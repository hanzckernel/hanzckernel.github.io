---
import { ClientRouter } from 'astro:transitions';
import BaseHead from '../components/BaseHead.astro';
import { Search } from '../components/Search';
import '../styles/global.css';

interface Props {
	title?: string;
	description?: string;
	image?: string;
}

const { 
    title = "Zhicheng Han | Personal Website", 
    description = "Personal website of Zhicheng Han, featuring web projects and academic work in mathematics.",
	image
} = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={title} description={description} image={image} />
		<ClientRouter />
	</head>
	<body class="bg-gray-900 text-white min-h-screen relative overflow-x-hidden">
		<!-- The "Swan" Background -->
		<div 
			class="fixed inset-0 z-[-1] bg-cover bg-center bg-no-repeat grayscale-[0.2]"
			style="background-image: url('/images/index.jpg');"
		>
            <!-- Overlay for Grainy Glassmorphism -->
            <div class="absolute inset-0 bg-black/40 backdrop-blur-[2px]"></div>
        </div>

		<div class="relative z-10 flex flex-col min-h-screen">
			<header class="p-6 border-b border-white/10 backdrop-blur-md sticky top-0 z-[60]">
				<nav class="max-w-6xl mx-auto flex justify-between items-center">
					<a href="/" class="text-2xl font-bold tracking-tighter">ZH</a>
					<div class="flex items-center space-x-8">
						<ul class="hidden md:flex space-x-8 text-sm font-medium uppercase tracking-widest">
							<li><a href="/" class="hover:text-blue-400 transition-colors">Home</a></li>
							<li><a href="/work" class="hover:text-blue-400 transition-colors">Work</a></li>
							<li><a href="/gallery" class="hover:text-blue-400 transition-colors">Gallery</a></li>
							<li><a href="/interests" class="hover:text-blue-400 transition-colors">Interests</a></li>
							<li><a href="/about" class="hover:text-blue-400 transition-colors">About</a></li>
							<li><a href="/contact" class="hover:text-blue-400 transition-colors">Contact</a></li>
						</ul>
						<Search client:load />
					</div>
				</nav>
			</header>

			<main class="flex-grow max-w-6xl mx-auto w-full p-6">
				<slot />
			</main>

			<footer class="p-6 border-t border-white/10 backdrop-blur-md text-center text-sm text-gray-400">
				&copy; {new Date().getFullYear()} Zhicheng Han. Built with Astro & Tailwind.
			</footer>
		</div>
	</body>
</html>

<style is:global>
    /* Grainy effect */
    body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0.05;
        z-index: 1000;
        pointer-events: none;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    }
</style>
